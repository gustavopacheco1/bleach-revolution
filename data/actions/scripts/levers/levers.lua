local paths = {
	[26000] = {
		wall_id = 1304,
		{ x = 3408, y = 2721, z = 7, stackpos = 1 },
		{ x = 3408, y = 2720, z = 7, stackpos = 1 }
	},

	[26001] = {
		wall_id = 1304,
		{ x = 3774, y = 3777, z = 8, stackpos = 1 },
		{ x = 3775, y = 3777, z = 8, stackpos = 1 },
		{ x = 3776, y = 3777, z = 8, stackpos = 1 },
		{ x = 3777, y = 3777, z = 8, stackpos = 1 }
	},

	[26002] = {
		wall_id = 1304,
		{ x = 3790, y = 3812, z = 8, stackpos = 1 },
		{ x = 3791, y = 3812, z = 8, stackpos = 1 },
		{ x = 3792, y = 3812, z = 8, stackpos = 1 },
		{ x = 3793, y = 3812, z = 8, stackpos = 1 },
		{ x = 3794, y = 3812, z = 8, stackpos = 1 }
	},

	[26003] = {
		wall_id = 1304,
		{ x = 3331, y = 3212, z = 9, stackpos = 1 },
		{ x = 3331, y = 3213, z = 9, stackpos = 1 },
		{ x = 3331, y = 3214, z = 9, stackpos = 1 },
		{ x = 3331, y = 3215, z = 9, stackpos = 1 },
		{ x = 3331, y = 3216, z = 9, stackpos = 1 },
		{ x = 3331, y = 3217, z = 9, stackpos = 1 },
		{ x = 3331, y = 3218, z = 9, stackpos = 1 }
	},

	[26004] = {
		wall_id = 1304,
		{ x = 4503, y = 4473, z = 7, stackpos = 1 },
		{ x = 4504, y = 4473, z = 7, stackpos = 1 },
		{ x = 4505, y = 4473, z = 7, stackpos = 1 },
		{ x = 4506, y = 4473, z = 7, stackpos = 1 },
		{ x = 4507, y = 4473, z = 7, stackpos = 1 },
		{ x = 4508, y = 4473, z = 7, stackpos = 1 },
		{ x = 4509, y = 4473, z = 7, stackpos = 1 },
		{ x = 4510, y = 4473, z = 7, stackpos = 1 },
		{ x = 4511, y = 4473, z = 7, stackpos = 1 },
		{ x = 4512, y = 4473, z = 7, stackpos = 1 },
		{ x = 4513, y = 4473, z = 7, stackpos = 1 }
	},

	[26005] = {
		{ x = 4520, y = 4328, z = 7, stackpos = 1 },
		{ x = 4521, y = 4328, z = 7, stackpos = 1 },
		{ x = 4522, y = 4328, z = 7, stackpos = 1 },
		{ x = 4523, y = 4328, z = 7, stackpos = 1 },
		{ x = 4524, y = 4328, z = 7, stackpos = 1 },
		{ x = 4525, y = 4328, z = 7, stackpos = 1 },
		{ x = 4526, y = 4328, z = 7, stackpos = 1 },
		{ x = 4527, y = 4328, z = 7, stackpos = 1 },
		{ x = 4528, y = 4328, z = 7, stackpos = 1 }
	},

	[26006] = {
		wall_id = 1304,
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4503, y = 4186, z = 7, stackpos = 1 },
		{ x = 4518, y = 4186, z = 7, stackpos = 1 }
	},

	[26007] = {
		wall_id = 1304,
		{ x = 4807, y = 4141, z = 7, stackpos = 1 },
		{ x = 4807, y = 4142, z = 7, stackpos = 1 },
		{ x = 4807, y = 4143, z = 7, stackpos = 1 },
		{ x = 4807, y = 4144, z = 7, stackpos = 1 },
		{ x = 4807, y = 4145, z = 7, stackpos = 1 },
		{ x = 4807, y = 4146, z = 7, stackpos = 1 },
		{ x = 4807, y = 4147, z = 7, stackpos = 1 },
		{ x = 4807, y = 4148, z = 7, stackpos = 1 },
		{ x = 4807, y = 4149, z = 7, stackpos = 1 },
		{ x = 4807, y = 4150, z = 7, stackpos = 1 },
		{ x = 4807, y = 4151, z = 7, stackpos = 1 },
		{ x = 4807, y = 4152, z = 7, stackpos = 1 },
		{ x = 4807, y = 4153, z = 7, stackpos = 1 }
	},

	[26008] = {
		teleport_id = 1387,
		destination = { x = 4484, y = 3759, z = 7 },
		position = { x = 4501, y = 3759, z = 7 },
		minutes_duration = 8
	},

	[26009] = {
		teleport_id = 1387,
		destination = { x = 4430, y = 3872, z = 7 },
		position = { x = 4448, y = 3872, z = 7 },
		minutes_duration = 8
	},

	[26010] = {
		teleport_id = 1387,
		destination = { x = 4561, y = 3968, z = 7 },
		position = { x = 4544, y = 3955, z = 7 },
		minutes_duration = 8
	},

	[26011] = {
		teleport_id = 1387,
		destination = { x = 4669, y = 3900, z = 7 },
		position = { x = 4668, y = 3826, z = 7 },
		minutes_duration = 8
	}
}

function onUse(cid, item, fromPosition, itemEx, toPosition)
	if item.itemid == 1946 then
		doTransformItem(item.uid, 1945)
		return true
	end

	local lever_aid = getItemAttribute(item.uid, "aid")

	if not (paths[lever_aid]) then
		return false
	end

	local path = paths[lever_aid]

	if path.wall_id then
		for position = 1, #path do
			local wall = getThingFromPosition(path[position])

			if wall.itemid == path.wall_id then
				doRemoveItem(wall.uid, 1)
			else
				doCreateItem(path.wall_id, path[position])
			end

			doSendMagicEffect(path[position], 2)
		end
	end

	if path.teleport_id then
		if getThingFromPosition(path.position).itemid == path.teleport_id then
			return MultiLanguage.doPlayerSendCancel(
				cid,
				"This lever has already been pulled.",
				"Esta alavanca já foi puxada."
			)
		end

		doCreateTeleport(path.teleport_id, path.destination, path.position)
		addEvent(
			function()
				local teleport = getThingFromPosition(path.position)

				if teleport.itemid == path.teleport_id then
					doRemoveItem(teleport.uid, 1)
				end
			end,
			path.minutes_duration * 60 * 1000
		)
	end

	doTransformItem(item.uid, 1946)
	return true
end
