local combat = createCombatObject()
setCombatParam(combat, COMBAT_PARAM_TYPE, COMBAT_PHYSICALDAMAGE)
setCombatParam(combat, COMBAT_PARAM_HITCOLOR, COLOR_DARKYELLOW)
setCombatFormula(combat, COMBAT_FORMULA_LEVELMAGIC, -50, 1, -52, 1)



arr1 = {
{1, 1, 1, 1, 1},
{1, 1, 1, 1, 1},
{1, 1, 2, 1, 1},
{1, 1, 1, 1, 1},
{1, 1, 1, 1, 1}
}

local area1 = createCombatArea(arr1)
setCombatArea(combat, area1)


function onCastSpell(cid, var)

if isPlayer(cid) and getPlayerStorageValue(cid, 45670) >= 1 or isPlayer(cid) and getPlayerStorageValue(cid, 45675) >= 1 then

return false
end

doCombat(cid, combat, var)

doSendMagicEffect({x=getCreaturePosition(cid).x+3, y=getCreaturePosition(cid).y, z=getCreaturePosition(cid).z}, 484)
doSendMagicEffect({x=getCreaturePosition(cid).x-1, y=getCreaturePosition(cid).y, z=getCreaturePosition(cid).z}, 484)
doSendMagicEffect({x=getCreaturePosition(cid).x+1, y=getCreaturePosition(cid).y-3, z=getCreaturePosition(cid).z}, 484)
doSendMagicEffect({x=getCreaturePosition(cid).x+1, y=getCreaturePosition(cid).y-3, z=getCreaturePosition(cid).z}, 484)

setPlayerStorageValue(cid, 45670, 1)
addEvent(function()
if not isCreature(cid) then return true end
setPlayerStorageValue(cid, 45670, 0)
end, 1500)

setPlayerStorageValue(cid, 45675, 1)
addEvent(function()
if not isCreature(cid) then return true end
setPlayerStorageValue(cid, 45675, 0)
end, 750)

return true
end